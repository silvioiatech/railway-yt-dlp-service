# Railway yt-dlp Service Configuration
# Copy this file to .env and modify values as needed

# =========================
# Basic Configuration
# =========================

# Server port
PORT=8000

# Public files directory (must be writable)
PUBLIC_FILES_DIR=/data/public

# Base URL for generating download links (required for production)
# PUBLIC_BASE_URL=https://your-domain.railway.app

# Default storage destination: LOCAL or DRIVE
DEFAULT_DEST=LOCAL

# =========================
# Security & Rate Limiting
# =========================

# API key for authentication (recommended for production)
# API_KEY=your-secret-api-key-here

# CORS origins (comma-separated, * for all)
CORS_ORIGINS=*

# Rate limiting (requests/time_unit)
RATE_LIMIT_REQUESTS=30/minute

# Signed links for enhanced security (true/false)
SIGNED_LINKS_ENABLED=false

# Key for signing download links (required if SIGNED_LINKS_ENABLED=true)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
# LINK_SIGNING_KEY=your-64-character-hex-key-here

# =========================
# Google Drive Integration (Optional)
# =========================

# Enable Google Drive: oauth, service, or leave empty to disable
# DRIVE_ENABLED=service

# Authentication method: oauth or service
# DRIVE_AUTH=service

# Default folder ID for uploads
# DRIVE_FOLDER_ID=your-google-drive-folder-id

# Make uploaded files public (true/false)
# DRIVE_PUBLIC=false

# OAuth method (if DRIVE_AUTH=oauth)
# GOOGLE_CLIENT_ID=your-oauth-client-id
# GOOGLE_CLIENT_SECRET=your-oauth-client-secret
# GOOGLE_REFRESH_TOKEN=your-oauth-refresh-token

# Service account method (if DRIVE_AUTH=service)
# Option 1: JSON as string
# DRIVE_SERVICE_ACCOUNT_JSON={"type":"service_account",...}

# Option 2: Base64 encoded JSON (recommended for env variables)
# DRIVE_SERVICE_ACCOUNT_JSON_B64=base64-encoded-service-account-json

# =========================
# Download Configuration
# =========================

# Download timeout in seconds
DOWNLOAD_TIMEOUT_SEC=5400

# Single-use token TTL in seconds (24 hours = 86400)
ONCE_TOKEN_TTL_SEC=86400

# Delete files after streaming (recommended: true)
DELETE_AFTER_SERVE=true

# =========================
# Logging
# =========================

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# =========================
# Production Example
# =========================

# For production deployment on Railway:
# PORT=8000
# PUBLIC_BASE_URL=https://your-app.railway.app
# PUBLIC_FILES_DIR=/app/data/public
# API_KEY=your-very-secure-api-key
# CORS_ORIGINS=https://yourdomain.com,https://anotherdomain.com
# RATE_LIMIT_REQUESTS=10/minute
# SIGNED_LINKS_ENABLED=true
# LINK_SIGNING_KEY=f3d1a2c4e9b6d8a7c5e9f2a8d6b4c7e1a9f8d2c6e4b8a7c3f9e2d8a5c6b1f4e8
# DRIVE_ENABLED=service
# DRIVE_SERVICE_ACCOUNT_JSON_B64=ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAg...
# DRIVE_FOLDER_ID=1BxiMVs0XRA5B-Example-Folder-ID
# LOG_LEVEL=INFO